<html>
<head>
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <!-- Jquery -->
    <script
            src="https://code.jquery.com/jquery-3.6.1.min.js"
            integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
            crossorigin="anonymous"></script>

    <link href="common.css" rel="stylesheet">
    <link href="environ.css" rel="stylesheet">
    <link href="agent_view.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <div id="navbar">
        <h1>
            OMS6460
        </h1>
        <h3>Simulation #2</h3>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="0-index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="1-pre-assessment.html">Pre-Assessment</a></li>
                <li class="breadcrumb-item "><a href="2-intro.html">Intro Video</a></li>
                <li class="breadcrumb-item "><a href="3-sim1.html">Simulation #1</a></li>
                <li class="breadcrumb-item"><a href="4-deeper-dive.html">Deeper Dive</a></li>
                <li class="breadcrumb-item active"><a href="5-sim2.html">Simulation #2</a></li>
                <li class="breadcrumb-item"><a href="6-debrief.html">Debrief Video</a></li>
            </ol>
        </nav>
    </div>
    <div id="environ-container">
        <div id="environ"></div>
        <div id="controls">
            <input type="button" value="Start" id="control_start">
            <input type="button" value="Stop" id="control_stop">
            |
            <input type="button" value="<< Slower" id="control_slower">
            <input type="button" value="Faster >>" id="control_faster">
            |
            <input type="text" value="" id="control_epoch" readonly>
            <input type="button" value="Jump Back Epochs" id="control_jump_back">
            <input type="button" value="Jump Ahead Epochs" id="control_jump_ahead">
            |
            <input type="checkbox" id="control_visualization"> Visualize Q
        </div>
        <a href="javascript:void(0)" class="btn btn-warning btn-lg active" role="button" aria-pressed="true"
           id="see_robot_perspective"><i class="bi bi-robot"></i> Jump into robot perspective</a>
        |
        <a href="4-deeper-dive.html" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Next: Watch
            deeper
            dive video</a>
    </div>
    <div id="agent_perspective" style="display:none">
        <div class="row">
            <div id="agent_view" class="col-3">
                <br/>
                <h3>AGENT PERPECTIVE</h3>
                <h6><b>Epoch</b>: <span id="agent_epoch">1</span></h6>
                <h6><b>Step</b>: <span id="agent_step">1</span></h6>
                <h6><b>Position</b>: <span id="agent_pos"></span></h6>
                <h6><b>Movement Rule</b>: Move towards the direction with the highest Q score.</h6>
                <br/><br/>
                <h6>Possible actions and associated Q scores:</h6><br/>
                <table>
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td id="q_action_N">
                        </td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>
                            <input type="button" value="Move &#8593" id="agent_action_N">
                        </td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td id="q_action_W"></td>
                        <td></td>
                        <td id="q_action_E"></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <input type="button" value="Move &#8592" id="agent_action_W">
                        </td>
                        <td>&nbsp;</td>
                        <td>
                            <input type="button" value="Move &#8594" id="agent_action_E">
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>
                            <input type="button" value="Move &#8595" id="agent_action_S">
                        </td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td id="q_action_S">
                        </td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    </tr>
                </table>
            </div>
            <div class="col-4">
                <svg version="1.1" id="agent_view_icon" xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 511.999 511.999;"
                     xml:space="preserve">
<g>
	<g>
		<path d="M424.464,226.038h-31.289c-4.637,0-8.394,3.758-8.394,8.394v17.485H370.51v-17.485c0-4.636-3.757-8.394-8.394-8.394
			h-34.743v-17.351h34.743c4.637,0,8.394-3.758,8.394-8.394V66.121c0-20.285-16.502-36.787-36.787-36.787h-69.329V8.394
			c0-4.636-3.757-8.394-8.394-8.394c-4.637,0-8.394,3.758-8.394,8.394v20.939h-69.33c-20.285,0-36.787,16.503-36.787,36.787v134.173
			c0,4.636,3.757,8.394,8.394,8.394h34.744v17.351h-34.744c-4.637,0-8.394,3.758-8.394,8.394v17.485h-14.271v-17.485
			c0-4.636-3.757-8.394-8.394-8.394h-31.29c-4.637,0-8.394,3.758-8.394,8.394v169.096c0,4.636,3.757,8.394,8.394,8.394h31.289
			c4.637,0,8.394-3.758,8.394-8.394V303.215h14.271v68.203c0,4.636,3.757,8.394,8.394,8.394h14.9v75.713h-10.586
			c-4.637,0-8.394,3.758-8.394,8.394v39.686c0,4.636,3.757,8.394,8.394,8.394h70.744c4.637,0,8.394-3.758,8.394-8.394v-39.686
			c0-4.636-3.757-8.394-8.394-8.394h-10.585v-75.713h83.289v75.713h-10.586c-4.637,0-8.394,3.758-8.394,8.394v39.686
			c0,4.636,3.757,8.394,8.394,8.394h70.744c4.637,0,8.394-3.758,8.394-8.394v-39.686c0-4.636-3.757-8.394-8.394-8.394h-10.585
			v-75.713h14.9c4.637,0,8.394-3.758,8.394-8.394v-68.203h14.271v100.312c0,4.636,3.757,8.394,8.394,8.394h31.289
			c4.637,0,8.394-3.758,8.394-8.394V234.431C432.857,229.796,429.1,226.038,424.464,226.038z M110.43,395.134H95.929V242.826h14.501
			V395.134z M141.489,286.428h-14.271v-17.723h14.271V286.428z M158.276,191.9V66.121c0-11.028,8.972-20,20-20h155.447
			c11.028,0,20,8.972,20,20V191.9H158.276z M310.586,208.686v17.351H201.414v-17.351H310.586z M216.547,472.314v22.898h-53.957
			v-22.898H216.547z M181.571,455.526v-75.713h15.998v75.713H181.571z M349.409,472.314v22.898h-53.957v-22.898H349.409z
			 M314.433,455.526v-75.713h15.998v75.713h0H314.433z M353.723,363.024H158.276V242.826h195.446V363.024z M384.781,286.428H370.51
			v-17.723h14.271V286.428z M416.07,395.134h-14.501V242.826h14.501V395.134z"/>
	</g>
</g>
                    <g>
	<g>
		<path d="M204.236,84.744c-20.803,0-37.727,16.924-37.727,37.726c0,20.802,16.924,37.726,37.727,37.726
			c20.802,0.001,37.726-16.923,37.726-37.726C241.963,101.668,225.039,84.744,204.236,84.744z M204.236,143.409
			c-11.545,0-20.94-9.392-20.94-20.939c0-11.545,9.394-20.939,20.94-20.939c11.545,0,20.939,9.393,20.939,20.939
			C225.175,134.016,215.782,143.409,204.236,143.409z"/>
	</g>
</g>
                    <g>
	<g>
		<path d="M307.765,84.744c-20.803,0-37.727,16.924-37.727,37.726c0,20.802,16.924,37.727,37.727,37.727
			c20.802,0,37.726-16.924,37.726-37.726S328.567,84.744,307.765,84.744z M307.765,143.409c-11.545,0-20.94-9.393-20.94-20.939
			c0-11.545,9.393-20.939,20.94-20.939c11.545,0,20.939,9.393,20.939,20.939C328.703,134.016,319.31,143.409,307.765,143.409z"/>
	</g>
</g>
                    <g>
	<g>
		<path d="M256.001,270.9c-30.317,0-54.982,24.664-54.982,54.982c0,4.636,3.757,8.394,8.394,8.394h93.176
			c4.637,0,8.394-3.758,8.394-8.394C310.982,295.565,286.318,270.9,256.001,270.9z M218.735,317.488
			c3.835-17.036,19.089-29.8,37.265-29.8c18.177,0,33.43,12.764,37.265,29.8H218.735z"/>
	</g>
</g>
                    <g>
	<g>
		<circle cx="326.744" cy="267.215" r="8.394"/>
	</g>
</g>
                    <g>
	<g>
		<circle cx="185.257" cy="267.215" r="8.394"/>
	</g>
</g>

</svg>
                <br/>
                <br/>
                <br/>
                <a href="javascript:void(0)" class="btn btn-warning btn-lg active" role="button" aria-pressed="true"
                   id="see_environ_perspective"><i class="bi bi-arrow-up-left-square"></i> Jump out of robot perspective</a>
            </div>
            <div class="col-4">
                <div id="agent_thoughts">&nbsp;</div>
            </div>
        </div>

    </div>
</div>


</body>
<footer>
    <script>
        let local_storage_environ = localStorage.getItem('local_storage_environ')
        if (parseInt(local_storage_environ) === 1) {
            localStorage.removeItem('q_learning_epoch')
            localStorage.removeItem('q_learning')
        }
        localStorage.setItem('local_storage_environ', 2)
    </script>
    <script src="scenarios/environ2.js"></script>
    <script src="common.js"></script>
    <script src="environ.js"></script>
    <script src="agent.js"></script>
    <script src="q.js"></script>
    <script src="policy.js"></script>
    <script src="visualization.js"></script>
    <script src="controls.js"></script>
    <script src="agent_view.js"></script>
    <script>
        environ = environ2
        render_environ()
        init_q('training2')
        init_agent()
        render_agent()
        init_controls()
        render_controls()
    </script>
</footer>
</html>